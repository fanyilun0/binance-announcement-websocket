# 币安公告监控工具

这是一个基于Python实现的币安公告实时监控工具。通过WebSocket API实时接收币安平台发布的公告信息，支持自动重连、心跳检测等功能。

## 功能特点

- 实时监控币安公告
- API密钥认证和签名验证
- 自动心跳检测（30秒间隔）
- 断线自动重连机制
- 详细的日志记录
- 防重复消息处理
- 异常处理和错误恢复

## 系统要求

- Python 3.7+
- 币安API密钥（需要在币安官网申请）

## 安装步骤

1. 克隆仓库:
```bash
git clone https://github.com/yourusername/binance-announcement-websocket.git
cd binance-announcement-websocket
```

2. 安装依赖:
```bash
pip install -r requirements.txt
```

3. 配置环境变量:
   - 复制`.env.example`文件并重命名为`.env`
   - 在`.env`文件中填入你的币安API密钥：
```
LOG_LEVEL=INFO
BINANCE_API_KEY=你的API密钥
BINANCE_SECRET_KEY=你的密钥
```

## 配置说明

### 环境变量

| 变量名 | 说明 | 默认值 | 是否必需 |
|--------|------|--------|----------|
| LOG_LEVEL | 日志级别 (DEBUG/INFO/WARNING/ERROR) | INFO | 否 |
| BINANCE_API_KEY | 币安API Key | - | 是 |
| BINANCE_SECRET_KEY | 币安Secret Key | - | 是 |

### 程序参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| reconnect_delay | 重连延迟时间（秒） | 5 |
| ping_interval | 心跳检测间隔（秒） | 30 |
| recv_window | 接收窗口（毫秒） | 30000 |

## 使用方法

1. 确保已正确配置`.env`文件

2. 运行监控程序:
```bash
python main.py
```

3. 程序运行后会：
   - 自动连接到币安WebSocket API
   - 进行API认证和签名验证
   - 订阅公告频道
   - 实时接收并显示新公告
   - 自动进行心跳检测
   - 在断线时自动重连

## 输出信息

程序运行时会输出以下信息：

- 连接状态信息
- 新公告详情：
  - 公告标题
  - 发布时间
  - 公告链接
- 错误和警告信息
- 重连提示

## 注意事项

1. API密钥安全：
   - 请妥善保管你的API密钥
   - 不要将含有密钥的`.env`文件提交到代码仓库
   - 建议定期更换API密钥

2. 使用限制：
   - WebSocket连接有效期不超过24小时
   - 每秒最多接受5个消息
   - 如果频繁断开连接，IP可能会被限制

3. 网络要求：
   - 确保网络稳定
   - 建议使用代理时配置适当的超时时间

## 错误处理

程序会自动处理以下情况：

1. 连接断开：自动重连
2. 心跳超时：重新建立连接
3. 消息处理错误：记录错误但不影响程序运行
4. API认证失败：输出错误信息并退出

## 开发计划

- [ ] 添加数据持久化存储
- [ ] 支持自定义通知方式（邮件、钉钉等）
- [ ] 添加公告内容过滤功能
- [ ] 支持多语言公告
- [ ] 添加Web管理界面

## 许可证

MIT

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。

## 更新日志

### v1.0.0
- 实现基本的公告监控功能
- 添加API认证和签名机制
- 实现心跳检测
- 添加自动重连功能
- 完善错误处理机制
